syntax = "proto3";

package plugin.v1;

option go_package = "xiaoheiplay/plugin/v1;pluginv1";

message SmsCapability {
  bool send = 1;
}

message PaymentCapability {
  repeated string methods = 1;
}

message KycCapability {
  bool start = 1;
  bool query_result = 2;
}

enum AutomationFeature {
  AUTOMATION_FEATURE_UNSPECIFIED = 0;
  AUTOMATION_FEATURE_CATALOG_SYNC = 1;
  AUTOMATION_FEATURE_LIFECYCLE = 2;
  AUTOMATION_FEATURE_PORT_MAPPING = 3;
  AUTOMATION_FEATURE_BACKUP = 4;
  AUTOMATION_FEATURE_SNAPSHOT = 5;
  AUTOMATION_FEATURE_FIREWALL = 6;
}

message AutomationCapability {
  // Supported features. Missing features are treated as "not supported".
  repeated AutomationFeature features = 1;

  // Optional reasons for why a feature is not supported.
  // Key is the numeric value of AutomationFeature.
  map<int32, string> not_supported_reasons = 2;
}

message Manifest {
  string plugin_id = 1;
  string name = 2;
  string version = 3;
  string description = 4;

  optional SmsCapability sms = 10;
  optional PaymentCapability payment = 11;
  optional KycCapability kyc = 12;
  optional AutomationCapability automation = 13;
}
